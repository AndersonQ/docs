steps:
  - input: "Build parameters"
    if: build.source == "ui"
    fields:
      - select: "Rebuild?"
        key: "REBUILD"
        default: false
        required: false
        options:
          - label: "no"
            value: false
          - label: "yes"
            value: true
        hint: "Should all books be rebuilt, regardless of what has changed? Build once with this set to true after every release."
      - select: "Allow Broken Links?"
        key: "ALLOW_BROKEN_LINKS"
        default: false
        options:
          - label: "no"
            value: false
          - label: "yes"
            value: true
        hint: "Should we ignore broken links? Ignoring broken links is dangerous not just because bad links will leak into the public site but because subsequent builds and pull requests that do not fix the links fail."
  - label: ":white_check_mark: Build docs"
    command: .buildkite/scripts/build-docs.sh
    #branches: "master"
    env:
      REBUILD: false
      SKIP_LINK_CHECK: false
      ALLOW_BROKEN_LINKS: false
    agents:
      provider: "gcp"
      image: family/docs-ubuntu-2204
